<!DOCTYPE html>
<html>
	<head>
	
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
		<title>StackOverflow Favorites Organizer</title>
		<link type="text/css" href="css/ui-lightness/jquery-ui-1.8.13.custom.css" rel="stylesheet" />	
		<script type="text/javascript" src="js/jquery-1.5.1.min.js"></script>
		<script type="text/javascript" src="js/jquery-ui-1.8.13.custom.min.js"></script>
		<link type="text/css" rel="Stylesheet" href="http://infinity88.com/stackunderflow/stackoverflow.min.css" />
		<script type="text/javascript" src="http://infinity88.com/stackunderflow/stackunderflow-1.0.3.min.js"></script>
		
		<script type="text/javascript">
			var tags = {};
			
			$(document).ready(function () {
			
				$('.expand').live('click', function(event) {
					$(this).next().toggle('slow');
					
					event.stopPropagation();
					event.preventDefault();
				});
				
				$('.questionContent').hide();
			
				$('#folders').sortable();
			
			
				$.getJSON('http://api.stackoverflow.com/1.1/users/340/favorites?jsonp=?',
					{
						pagesize: '100'
					},
					function(data) {
						$.each(data.questions, function(index, question) {
						
							$.each(question.tags, function(index, tag) {
								if(tags[tag]) {
									tags[tag].questions.push(question);
								} else {
									tags[tag] = { "questions": [ question ] };
								}
							});
						
						});
						
						//Show a folder for each tag with the right questions in it
						$.each(tags, function(tagName, tagQuestions) {
							var tagContainerHtml = '<li>'+tagName+' <a class="expand tagContainer" href="">+</a><div id="'+tagName+'_tagContainer"class="tagQuestions" style="display: none;"></div><div style="clear:both;"></div></li>';
							
							$('#folders').append(tagContainerHtml);
							
							stackunderflow.render.questions(tagQuestions, '#'+tagName+'_tagContainer');
						});
						
					});
					
			});
		</script>
		
	</head>
	<body>
		<ul id="folders">

		</ul>
	</body>
</html>


